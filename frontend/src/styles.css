@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   DESIGN TOKENS
   ============================================ */

@layer base {
  :root {
    /* Surface colors (RGB values for alpha support) */
    --color-surface-base: 2 6 23; /* slate-950 */
    --color-surface-elevated: 15 23 42; /* slate-900 */
    --color-surface-overlay: 30 41 59; /* slate-800 */

    /* Border colors */
    --color-border: 51 65 85; /* slate-700 */
    --color-border-muted: 30 41 59; /* slate-800 */

    /* Text colors */
    --color-content: 248 250 252; /* slate-50 */
    --color-content-muted: 148 163 184; /* slate-400 */
    --color-content-subtle: 100 116 139; /* slate-500 */
    --color-content-inverse: 2 6 23; /* slate-950 */

    /* Accent colors (sky) */
    --color-accent: 14 165 233; /* sky-500 */
    --color-accent-hover: 56 189 248; /* sky-400 */
    --color-accent-muted: 12 74 110; /* sky-900 */
    --color-accent-text: 125 211 252; /* sky-300 */

    /* Success colors (emerald) */
    --color-success: 16 185 129; /* emerald-500 */
    --color-success-muted: 6 78 59; /* emerald-900 */
    --color-success-text: 167 243 208; /* emerald-200 */

    /* Error colors (rose) */
    --color-error: 244 63 94; /* rose-500 */
    --color-error-muted: 76 5 25; /* rose-950 */
    --color-error-text: 254 205 211; /* rose-200 */
  }

  body {
    @apply bg-surface-base text-content;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
      "Segoe UI", sans-serif;
  }
}

/* ============================================
   COMPONENT STYLES
   ============================================ */

@layer components {
  /* Skip link for accessibility */
  .skip-link {
    @apply absolute -top-10 left-4 z-50 rounded-input bg-accent px-4 py-2 text-sm font-semibold text-content-inverse transition-all;
  }

  .skip-link:focus {
    @apply top-4;
  }

  /* Card containers */
  .card {
    @apply rounded-card border border-border-muted bg-surface-elevated/40 p-6 shadow-card;
  }

  .card-inner {
    @apply rounded-xl border border-border bg-surface-elevated/60 p-4;
  }

  /* Form inputs */
  .input {
    @apply w-full rounded-input border border-border bg-surface-elevated px-3 py-2.5 text-sm text-content placeholder-content-subtle transition-colors;
    @apply focus:border-accent-hover focus:outline-none focus:ring-2 focus:ring-accent/40;
  }

  .input-dark {
    @apply w-full rounded-input border border-border bg-surface-base px-3 py-2.5 text-sm text-content placeholder-content-subtle transition-colors;
    @apply focus:border-accent-hover focus:outline-none focus:ring-2 focus:ring-accent/40;
  }

  /* Labels */
  .label {
    @apply block text-sm font-medium text-content/90;
  }

  .label-hint {
    @apply mt-1 text-xs text-content-subtle;
  }

  /* Buttons */
  .btn {
    @apply inline-flex min-h-touch items-center justify-center rounded-input px-5 py-2.5 text-sm font-semibold transition-colors;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
    @apply disabled:cursor-not-allowed disabled:opacity-60;
  }

  .btn-primary {
    @apply btn bg-accent text-content-inverse shadow hover:bg-accent-hover;
  }

  .btn-secondary {
    @apply btn border border-border text-content hover:border-accent hover:text-accent-text;
  }

  .btn-ghost {
    @apply btn text-content-muted hover:text-content;
  }

  .btn-light {
    @apply btn bg-content text-content-inverse hover:bg-white;
  }

  /* Time slot pills */
  .slot-pill {
    @apply min-h-touch rounded-pill px-4 py-2 text-xs font-medium transition-colors;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
  }

  .slot-pill-default {
    @apply slot-pill bg-surface-overlay text-content hover:bg-border;
  }

  .slot-pill-selected {
    @apply slot-pill bg-accent text-content-inverse;
  }

  /* Feedback alerts */
  .alert {
    @apply rounded-input border p-3 text-sm;
  }

  .alert-error {
    @apply alert border-error/60 bg-error-muted/40 text-error-text;
  }

  .alert-success {
    @apply alert border-success/60 bg-success-muted/40 text-success-text;
  }

  .alert-info {
    @apply alert border-accent/40 bg-accent-muted/30 text-content-muted;
  }

  /* Week view cells */
  .week-cell {
    @apply flex min-h-touch items-center justify-center text-xs;
  }

  .week-cell-available {
    @apply week-cell cursor-pointer text-accent-text transition-colors hover:bg-accent/10;
  }

  .week-cell-selected {
    @apply week-cell cursor-pointer bg-accent text-content-inverse;
  }

  .week-cell-busy {
    @apply week-cell text-content-subtle;
  }

  .week-header-cell {
    @apply text-center text-[10px] font-medium uppercase tracking-wider text-content-muted;
  }

  .week-time-label {
    @apply pr-2 text-right text-[10px] text-content-subtle;
  }

  .week-nav-btn {
    @apply inline-flex h-8 w-8 items-center justify-center rounded-input text-content-muted transition-colors hover:bg-surface-overlay hover:text-content;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
  }

  /* Mini calendar cells */
  .mini-cal-cell {
    @apply flex h-8 w-8 items-center justify-center rounded-full text-xs;
  }

  .mini-cal-available {
    @apply mini-cal-cell cursor-pointer text-accent-text hover:bg-accent/10;
  }

  .mini-cal-unavailable {
    @apply mini-cal-cell text-content-subtle;
  }

  .mini-cal-selected {
    @apply mini-cal-cell cursor-pointer bg-accent text-content-inverse;
  }

  .mini-cal-outside {
    @apply mini-cal-cell text-content-subtle/40;
  }

  .mini-cal-dot {
    @apply mx-auto mt-0.5 h-1 w-1 rounded-full bg-accent;
  }

  /* Honeypot field â€” visually hidden but not display:none (bots detect that) */
  .honeypot-field {
    position: absolute;
    left: -9999px;
    height: 0;
    overflow: hidden;
    opacity: 0;
  }

  /* Loading skeleton */
  .skeleton {
    @apply animate-pulse rounded bg-surface-overlay;
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

@layer utilities {
  /* Required field indicator */
  .required-indicator::after {
    content: " *";
    @apply text-error;
  }

  /* Text overflow utilities */
  .text-truncate {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Focus visible for keyboard navigation */
:focus-visible {
  @apply outline-2 outline-offset-2 outline-accent;
}

/* Remove default focus outline when using mouse */
:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast mode support */
@media (forced-colors: active) {
  .btn-primary,
  .btn-secondary {
    border: 2px solid currentColor;
  }

  .card,
  .card-inner {
    border: 1px solid currentColor;
  }
}
